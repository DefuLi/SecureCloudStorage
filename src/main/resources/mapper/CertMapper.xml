<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="cn.xjtu.iotlab.dao.CertMapper" >
    <resultMap id="BaseResultMap" type="cn.xjtu.iotlab.vo.Cert">
        <id column="id" jdbcType="INTEGER" property="id" />
        <result column="cert" jdbcType="VARCHAR" property="cert" />
        <result column="authoruser" jdbcType="VARCHAR" property="authoruser" />
        <result column="authorizeduser" jdbcType="VARCHAR" property="authorizeduser" />
        <result column="accesstype" jdbcType="VARCHAR" property="accesstype" />
    </resultMap>
     <resultMap id="CertListResultMap" type="cn.xjtu.iotlab.vo.Cert">
        <result column="authoruser" jdbcType="VARCHAR" property="authoruser" />
        <result column="authorizeduser" jdbcType="VARCHAR" property="authorizeduser" />
        <result column="accesstype" jdbcType="VARCHAR" property="accesstype" />
    </resultMap>
    <insert id="addCert" parameterType="cn.xjtu.iotlab.vo.Cert" >
        <!--
          WARNING - @mbggenerated
          This element is automatically generated by MyBatis Generator, do not modify.
        -->
        insert into cert (id, cert,authoruser,authorizeduser,accesstype,opeart_k,cescmc_k,cescmc_n,aes_key,rsa_key1,rsa_key2
        )
        values (#{id,jdbcType=INTEGER}, #{cert,jdbcType=VARCHAR}, #{authoruser,jdbcType=VARCHAR},
        #{authorizeduser,jdbcType=VARCHAR},#{accesstype,jdbcType=VARCHAR},#{opeart_k,jdbcType=BIGINT},
        #{cescmc_k,jdbcType=INTEGER},#{cescmc_n,jdbcType=INTEGER},#{aes_key,jdbcType=VARCHAR},
        #{rsa_key1,jdbcType=VARCHAR},#{rsa_key2,jdbcType=VARCHAR}
        )
    </insert>

    <select id="certList" resultMap="CertListResultMap">
    select *
    from cert
    where authoruser = #{authoruser,jdbcType=VARCHAR}
  </select>
    <delete id="deleteCert" parameterType="cn.xjtu.iotlab.vo.Cert" >
        <!--
          WARNING - @mbggenerated
          This element is automatically generated by MyBatis Generator, do not modify.
        -->
        delete from cert
        where cert = #{cert,jdbcType=VARCHAR}
    </delete>
    <select id="findCert" parameterType="java.lang.String" resultType="java.lang.Integer">
    select count(*)
    from cert
    where authoruser = #{0} and authorizeduser= #{1}
  </select>
</mapper>
